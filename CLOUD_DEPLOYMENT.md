# ‚òÅÔ∏è –û–±–ª–∞—á–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Backend API

## üéØ **–¶–µ–ª—å: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**

–°–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã:
- **PWA –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ** ‚Üí **–û–±–ª–∞—á–Ω—ã–π Backend API** ‚Üí **PostgreSQL**
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥–∞–Ω–Ω—ã–µ
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** –º–µ–∂–¥—É –≤—Å–µ–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

## üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:**

```
üì± –¢–µ–ª–µ—Ñ–æ–Ω (PWA)     üíª –ö–æ–º–ø—å—é—Ç–µ—Ä (PWA)     üì± –ü–ª–∞–Ω—à–µ—Ç (PWA)
         ‚Üì                      ‚Üì                      ‚Üì
    üåê –û–±–ª–∞—á–Ω—ã–π Backend API (Node.js + Express)
         ‚Üì
    üíæ PostgreSQL (Yandex Cloud)
```

## üöÄ **–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:**

### **–í–∞—Ä–∏–∞–Ω—Ç 1: Railway (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
- **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** –¥–ª—è –Ω–∞—á–∞–ª–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** –∏–∑ GitHub
- **PostgreSQL** –≤—Å—Ç—Ä–æ–µ–Ω
- **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### **–í–∞—Ä–∏–∞–Ω—Ç 2: Render**
- **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** –¥–ª—è –Ω–∞—á–∞–ª–∞
- **–ü—Ä–æ—Å—Ç–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**
- **PostgreSQL** –¥–æ—Å—Ç—É–ø–µ–Ω
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π**

### **–í–∞—Ä–∏–∞–Ω—Ç 3: Heroku**
- **–ü–ª–∞—Ç–Ω–æ** (–Ω–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ tier)
- **–ù–∞–¥–µ–∂–Ω–æ** –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ
- **PostgreSQL** addon
- **–•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

### **–í–∞—Ä–∏–∞–Ω—Ç 4: Yandex Cloud (–¢–µ–∫—É—â–∏–π)**
- **–£–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω** PostgreSQL
- **–ù—É–∂–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å** Compute Instance
- **–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å** –Ω–∞–¥ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

## üìã **–ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω:**

### **–≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é**

1. **–°–æ–∑–¥–∞—Ç—å production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é**
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
3. **–î–æ–±–∞–≤–∏—Ç—å health checks**
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –¥–ª—è PWA**

### **–≠—Ç–∞–ø 2: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ Railway**

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
3. **–î–æ–±–∞–≤–∏—Ç—å PostgreSQL**
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–º–µ–Ω**

### **–≠—Ç–∞–ø 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ PWA**

1. **–ò–∑–º–µ–Ω–∏—Ç—å API URL** –Ω–∞ –æ–±–ª–∞—á–Ω—ã–π
2. **–î–æ–±–∞–≤–∏—Ç—å –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º**
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é**
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**

## üîß **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

### **1. Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**

```javascript
// backend/config/production.js
module.exports = {
  database: {
    host: process.env.DB_HOST,
    port: process.env.DB_PORT,
    database: process.env.DB_NAME,
    user: process.env.DB_USER,
    password: process.env.DB_PASSWORD,
    ssl: { rejectUnauthorized: false }
  },
  cors: {
    origin: [
      'https://dimkandin.github.io',
      'https://habit-tracker.railway.app'
    ],
    credentials: true
  }
};
```

### **2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ PWA:**

```javascript
// src/services/api.js
const API_BASE_URL = process.env.NODE_ENV === 'production' 
  ? 'https://habit-tracker-api.railway.app/api'
  : 'http://localhost:5001/api';

class ApiService {
  async syncHabits() {
    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –æ–±–ª–∞–∫–æ–º
  }
  
  async getHabits() {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–µ–∫
  }
}
```

### **3. –û—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º:**

```javascript
// src/services/offline.js
class OfflineService {
  async saveLocally(data) {
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
  }
  
  async syncWhenOnline() {
    // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
  }
}
```

## üìä **–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è:**

### **‚úÖ –ß—Ç–æ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å:**

1. **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–µ–∫ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ** ‚Üí –°–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –æ–±–ª–∞–∫–µ
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è** ‚Üí –î–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è
3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** ‚Üí –ú–µ–∂–¥—É –≤—Å–µ–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
4. **–û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º** ‚Üí –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
5. **–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏** ‚Üí –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –æ–±–ª–∞–∫–µ

### **üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –¥–∞–Ω–Ω—ã—Ö:**

```
1. –¢–µ–ª–µ—Ñ–æ–Ω: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏
   ‚Üì
2. –û–±–ª–∞–∫–æ: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL
   ‚Üì
3. –ö–æ–º–ø—å—é—Ç–µ—Ä: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
   ‚Üì
4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: –î–∞–Ω–Ω—ã–µ –æ—Å—Ç–∞—é—Ç—Å—è
   ‚Üì
5. –¢–µ–ª–µ—Ñ–æ–Ω: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```

## üéØ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –æ–±–ª–∞—á–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è:**

### **–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- üì± –î–∞–Ω–Ω—ã–µ –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö
- üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- üíæ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
- ‚ö° –ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞

### **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:**
- üöÄ –ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
- üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏
- üîß –õ–µ–≥–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

## üöÄ **–ì–æ—Ç–æ–≤—ã –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é?**

–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –∏ –Ω–∞—á–Ω–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫—É –æ–±–ª–∞—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏! 